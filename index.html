<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refsinator</title>
    <!-- Include Paper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.12.15/paper-full.min.js"></script>
    <script type="module" src="src\main-newtwo.js"></script>
    <link rel="stylesheet" href="styles.css"> <!-- Link to the CSS file -->
</head>
<body>
    <div id="title">22.5° Refsinator</div>

    <div id="description">
        Input a 22.5° Crease Pattern as a .FOLD file. Refsinator will provide a sequence of folds to exactly develop a reference line, shown in green. 
        Use the + and - buttons at the bottom of the screen to scroll through multiple options.  The options are approximately ordered by number of creases required.
        Note that in many cases, not all the creases shown must be folded, and oftentimes pinch-folds are sufficient.
    </div>

    <div id="inputContainer">
        <div class="inputRow">
            <input type="file" id="fileInput" />
            <button id="submitButton">Update Values</button>
        </div>
        <div class="inputRow">
            <label for="value1">Avoid fractions having a denominator greater than:</label>
            <input type="number" id="value1" value="100">
        </div>
        <div class="inputRow">
            <label for="value2">Avoid refs within this distance of the edge (edge length = 1):</label>
            <input type="number" id="value2" value="0.1">
        </div>
    </div>

    <canvas id="myCanvas" resize></canvas>

    <div id="controls">
        <button id="decreaseButton">-</button>
        <span id="variableValue">1</span>
        <button id="increaseButton">+</button>
    </div>

    <script type="module">
        // Initialize Paper.js
        function initializeCanvas() {
            const canvas = document.getElementById('myCanvas');
            if (canvas) {
                paper.setup(canvas);
                resizeCanvas(); // Ensure canvas size is correct
                window.addEventListener('resize', resizeCanvas); // Adjust canvas on window resize
            } else {
                console.error('Canvas element not found.');
            }
        }

        // Function to resize the canvas
        function resizeCanvas() {
            const canvas = document.getElementById('myCanvas');
            if (canvas) {
                const height = window.innerHeight - (document.getElementById('title').offsetHeight +
                                                     document.getElementById('description').offsetHeight +
                                                     document.getElementById('inputContainer').offsetHeight +
                                                     document.getElementById('controls').offsetHeight);
                canvas.width = window.innerWidth;
                canvas.height = height;
                paper.view.viewSize = new paper.Size(canvas.width, canvas.height);
            }
        }

        // Initialize the canvas when the page loads
        window.onload = initializeCanvas;
    </script>
</body>
</html>